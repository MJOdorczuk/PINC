\hypertarget{input_8c}{}\section{/home/gullik/\+Documents/\+Pi\+C/mn-\/fysrp-\/pic/\+Di\+P3\+D/src/input.c File Reference}
\label{input_8c}\index{/home/gullik/\+Documents/\+Pi\+C/mn-\/fysrp-\/pic/\+Di\+P3\+D/src/input.\+c@{/home/gullik/\+Documents/\+Pi\+C/mn-\/fysrp-\/pic/\+Di\+P3\+D/src/input.\+c}}


P\+I\+N\+C main routine.  


{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
{\ttfamily \#include \char`\"{}iniparser.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pinc.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static char $\ast$$\ast$ \hyperlink{input_8c_a841e56bfe95e1b90f05dd03174beb4ed}{list\+\_\+to\+\_\+strarr} (const char $\ast$list)
\begin{DoxyCompactList}\small\item\em Splits a comma-\/separated list-\/string to an array of strings. \end{DoxyCompactList}\item 
static void \hyperlink{input_8c_afaf1b8cd07e1a8c2f8a315e72c9d8c26}{free\+\_\+strarr} (char $\ast$$\ast$strarr)
\begin{DoxyCompactList}\small\item\em Frees dynamically allocated N\+U\+L\+L-\/terminated array of strings. \end{DoxyCompactList}\item 
static int \hyperlink{input_8c_a20c07ae122840b7ef09b2e915d2fd07b}{list\+\_\+getnelements} (const char $\ast$list)
\begin{DoxyCompactList}\small\item\em Gets number of elements in comma-\/separated list-\/string. \end{DoxyCompactList}\item 
static int \hyperlink{input_8c_adb1b0d512e381088fdcbc9a99817a814}{listparser\+\_\+getnelements} (const dictionary $\ast$d, const char $\ast$key)
\begin{DoxyCompactList}\small\item\em Gets number of elements in comma-\/separated entry in ini file. \end{DoxyCompactList}\item 
static void \hyperlink{input_8c_aa1b75309fa39157ffff8aa636467d581}{listparser\+\_\+getdouble} (const dictionary $\ast$d, const char $\ast$key, double $\ast$result)
\begin{DoxyCompactList}\small\item\em Get the array of doubles associated to a key in ini file. \end{DoxyCompactList}\item 
static double $\ast$ \hyperlink{input_8c_a35f5cc7d9c86d86fd468cb46842369d0}{listparser\+\_\+getallocdouble} (const dictionary $\ast$d, const char $\ast$key, int $\ast$count)
\begin{DoxyCompactList}\small\item\em Get the array of doubles associated to a key in ini file. \end{DoxyCompactList}\item 
static void \hyperlink{input_8c_a7ac0dd284774d1f33fceef14a83c8e22}{listparser\+\_\+getint} (const dictionary $\ast$d, const char $\ast$key, int $\ast$result)
\begin{DoxyCompactList}\small\item\em Get the array of integers associated to a key in ini file. \end{DoxyCompactList}\item 
static int $\ast$ \hyperlink{input_8c_ac03a6a2a61fbc119612529d5fbd7e1aa}{listparser\+\_\+getallocint} (const dictionary $\ast$d, const char $\ast$key, int $\ast$count)
\begin{DoxyCompactList}\small\item\em Get the array of integers associated to a key in ini file. \end{DoxyCompactList}\item 
\hypertarget{input_8c_a2bcd632eaecf20497787e055a4e1412d}{}static void {\bfseries fprintarr} (F\+I\+L\+E $\ast$stream, const char $\ast$restrict format, void $\ast$arr, int count)\label{input_8c_a2bcd632eaecf20497787e055a4e1412d}

\item 
void \hyperlink{input_8c_a8936b6e0080553a6d24710d459cf8853}{parse\+\_\+input} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Parse P\+I\+N\+C\textquotesingle{}s input argument and input file. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
P\+I\+N\+C main routine. 

\begin{DoxyAuthor}{Author}
Sigvald Marholm \href{mailto:sigvaldm@fys.uio.no}{\tt sigvaldm@fys.\+uio.\+no} 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
University of Oslo, Norway 
\end{DoxyCopyright}
\begin{DoxyDate}{Date}
13.\+10.\+15
\end{DoxyDate}
Functions for parsing input to P\+I\+N\+C. Replaces old Di\+P3\+D \hyperlink{input_8c}{input.\+c} file by Wojciech Jacek Miloch. 

\subsection{Function Documentation}
\hypertarget{input_8c_afaf1b8cd07e1a8c2f8a315e72c9d8c26}{}\index{input.\+c@{input.\+c}!free\+\_\+strarr@{free\+\_\+strarr}}
\index{free\+\_\+strarr@{free\+\_\+strarr}!input.\+c@{input.\+c}}
\subsubsection[{free\+\_\+strarr(char $\ast$$\ast$strarr)}]{\setlength{\rightskip}{0pt plus 5cm}static void free\+\_\+strarr (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{strarr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_afaf1b8cd07e1a8c2f8a315e72c9d8c26}


Frees dynamically allocated N\+U\+L\+L-\/terminated array of strings. 


\begin{DoxyParams}{Parameters}
{\em strarr} & Pointer to array of strings \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\hypertarget{input_8c_a20c07ae122840b7ef09b2e915d2fd07b}{}\index{input.\+c@{input.\+c}!list\+\_\+getnelements@{list\+\_\+getnelements}}
\index{list\+\_\+getnelements@{list\+\_\+getnelements}!input.\+c@{input.\+c}}
\subsubsection[{list\+\_\+getnelements(const char $\ast$list)}]{\setlength{\rightskip}{0pt plus 5cm}static int list\+\_\+getnelements (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{list}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_a20c07ae122840b7ef09b2e915d2fd07b}


Gets number of elements in comma-\/separated list-\/string. 


\begin{DoxyParams}{Parameters}
{\em list} & Comma-\/separated list \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of elements in list. 0 if string is empty. 
\end{DoxyReturn}
\hypertarget{input_8c_a841e56bfe95e1b90f05dd03174beb4ed}{}\index{input.\+c@{input.\+c}!list\+\_\+to\+\_\+strarr@{list\+\_\+to\+\_\+strarr}}
\index{list\+\_\+to\+\_\+strarr@{list\+\_\+to\+\_\+strarr}!input.\+c@{input.\+c}}
\subsubsection[{list\+\_\+to\+\_\+strarr(const char $\ast$list)}]{\setlength{\rightskip}{0pt plus 5cm}static char $\ast$$\ast$ list\+\_\+to\+\_\+strarr (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{list}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_a841e56bfe95e1b90f05dd03174beb4ed}


Splits a comma-\/separated list-\/string to an array of strings. 


\begin{DoxyParams}{Parameters}
{\em list} & Comma-\/sepaprated list \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A N\+U\+L\+L-\/terminated array of N\+U\+L\+L-\/terminated strings
\end{DoxyReturn}
Example\+: when str=\char`\"{}abc ,def, ghi\char`\"{}, list2strarr(str); will return an array arr such that \+:

arr\mbox{[}0\mbox{]}=\char`\"{}abc\char`\"{} arr\mbox{[}1\mbox{]}=\char`\"{}def\char`\"{} arr\mbox{[}2\mbox{]}=\char`\"{}ghi\char`\"{} arr\mbox{[}3\mbox{]}=N\+U\+L\+L

Note that whitespaces are trimmed away. Remember to free string array. This can be done with \hyperlink{input_8c_afaf1b8cd07e1a8c2f8a315e72c9d8c26}{free\+\_\+strarr()}. \hypertarget{input_8c_a35f5cc7d9c86d86fd468cb46842369d0}{}\index{input.\+c@{input.\+c}!listparser\+\_\+getallocdouble@{listparser\+\_\+getallocdouble}}
\index{listparser\+\_\+getallocdouble@{listparser\+\_\+getallocdouble}!input.\+c@{input.\+c}}
\subsubsection[{listparser\+\_\+getallocdouble(const dictionary $\ast$d, const char $\ast$key, int $\ast$count)}]{\setlength{\rightskip}{0pt plus 5cm}static double $\ast$ listparser\+\_\+getallocdouble (
\begin{DoxyParamCaption}
\item[{const dictionary $\ast$}]{d, }
\item[{const char $\ast$}]{key, }
\item[{int $\ast$}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_a35f5cc7d9c86d86fd468cb46842369d0}


Get the array of doubles associated to a key in ini file. 


\begin{DoxyParams}[1]{Parameters}
 & {\em d} & Dictionary to search \\
\hline
 & {\em key} & Key string to look for in iniparser dictionary \\
\hline
\mbox{\tt out}  & {\em count} & Number of elements in returned array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Array of doubles
\end{DoxyReturn}
This function can be seen as an extension to iniparser in order to handle comma-\/separated entries. It is syntactically similar to the functions in iniparser.

\hyperlink{input_8c_aa1b75309fa39157ffff8aa636467d581}{listparser\+\_\+getdouble()} is similar to this but does not allocate memory. \hypertarget{input_8c_ac03a6a2a61fbc119612529d5fbd7e1aa}{}\index{input.\+c@{input.\+c}!listparser\+\_\+getallocint@{listparser\+\_\+getallocint}}
\index{listparser\+\_\+getallocint@{listparser\+\_\+getallocint}!input.\+c@{input.\+c}}
\subsubsection[{listparser\+\_\+getallocint(const dictionary $\ast$d, const char $\ast$key, int $\ast$count)}]{\setlength{\rightskip}{0pt plus 5cm}static int $\ast$ listparser\+\_\+getallocint (
\begin{DoxyParamCaption}
\item[{const dictionary $\ast$}]{d, }
\item[{const char $\ast$}]{key, }
\item[{int $\ast$}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_ac03a6a2a61fbc119612529d5fbd7e1aa}


Get the array of integers associated to a key in ini file. 


\begin{DoxyParams}[1]{Parameters}
 & {\em d} & Dictionary to search \\
\hline
 & {\em key} & Key string to look for in iniparser dictionary \\
\hline
\mbox{\tt out}  & {\em count} & Number of elements in returned array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Array of integers
\end{DoxyReturn}
This function can be seen as an extension to iniparser in order to handle comma-\/separated entries. It is syntactically similar to the functions in iniparser.

\hyperlink{input_8c_a7ac0dd284774d1f33fceef14a83c8e22}{listparser\+\_\+getint()} is similar to this but does not allocate memory. \hypertarget{input_8c_aa1b75309fa39157ffff8aa636467d581}{}\index{input.\+c@{input.\+c}!listparser\+\_\+getdouble@{listparser\+\_\+getdouble}}
\index{listparser\+\_\+getdouble@{listparser\+\_\+getdouble}!input.\+c@{input.\+c}}
\subsubsection[{listparser\+\_\+getdouble(const dictionary $\ast$d, const char $\ast$key, double $\ast$result)}]{\setlength{\rightskip}{0pt plus 5cm}static void listparser\+\_\+getdouble (
\begin{DoxyParamCaption}
\item[{const dictionary $\ast$}]{d, }
\item[{const char $\ast$}]{key, }
\item[{double $\ast$}]{result}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_aa1b75309fa39157ffff8aa636467d581}


Get the array of doubles associated to a key in ini file. 


\begin{DoxyParams}[1]{Parameters}
 & {\em d} & Dictionary to search \\
\hline
 & {\em key} & Key string to look for in iniparser dictionary \\
\hline
\mbox{\tt out}  & {\em result} & Pointer to pre-\/allocated array to store results in \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
This function can be seen as an extension to iniparser in order to handle comma-\/separated entries. It is syntactically similar to the functions in iniparser.

Array of results must be allocated before being passed to this function. The number of elements to allocate can be obtained by \hyperlink{input_8c_adb1b0d512e381088fdcbc9a99817a814}{listparser\+\_\+getnelements()}.

\hyperlink{input_8c_a35f5cc7d9c86d86fd468cb46842369d0}{listparser\+\_\+getallocdouble()} is similar to this but allocates memory. \hypertarget{input_8c_a7ac0dd284774d1f33fceef14a83c8e22}{}\index{input.\+c@{input.\+c}!listparser\+\_\+getint@{listparser\+\_\+getint}}
\index{listparser\+\_\+getint@{listparser\+\_\+getint}!input.\+c@{input.\+c}}
\subsubsection[{listparser\+\_\+getint(const dictionary $\ast$d, const char $\ast$key, int $\ast$result)}]{\setlength{\rightskip}{0pt plus 5cm}static void listparser\+\_\+getint (
\begin{DoxyParamCaption}
\item[{const dictionary $\ast$}]{d, }
\item[{const char $\ast$}]{key, }
\item[{int $\ast$}]{result}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_a7ac0dd284774d1f33fceef14a83c8e22}


Get the array of integers associated to a key in ini file. 


\begin{DoxyParams}{Parameters}
{\em d} & Dictionary to search \\
\hline
{\em key} & Key string to look for in iniparser dictionary \\
\hline
{\em result} & Pointer to pre-\/allocated array to store results in \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
This function can be seen as an extension to iniparser in order to handle comma-\/separated entries. It is syntactically similar to the functions in iniparser.

Array of results must be allocated before being passed to this function. The number of elements to allocate can be obtained by \hyperlink{input_8c_adb1b0d512e381088fdcbc9a99817a814}{listparser\+\_\+getnelements()}. \hypertarget{input_8c_adb1b0d512e381088fdcbc9a99817a814}{}\index{input.\+c@{input.\+c}!listparser\+\_\+getnelements@{listparser\+\_\+getnelements}}
\index{listparser\+\_\+getnelements@{listparser\+\_\+getnelements}!input.\+c@{input.\+c}}
\subsubsection[{listparser\+\_\+getnelements(const dictionary $\ast$d, const char $\ast$key)}]{\setlength{\rightskip}{0pt plus 5cm}static int listparser\+\_\+getnelements (
\begin{DoxyParamCaption}
\item[{const dictionary $\ast$}]{d, }
\item[{const char $\ast$}]{key}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{input_8c_adb1b0d512e381088fdcbc9a99817a814}


Gets number of elements in comma-\/separated entry in ini file. 


\begin{DoxyParams}{Parameters}
{\em d} & Dictionary to search \\
\hline
{\em key} & Key string to look for in iniparser dictionary \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of elements in entry. 0 if entry does not exist.
\end{DoxyReturn}
This function can be seen as an extension to iniparser in order to handle comma-\/separated entries. It is syntactically similar to the functions in iniparser. \hypertarget{input_8c_a8936b6e0080553a6d24710d459cf8853}{}\index{input.\+c@{input.\+c}!parse\+\_\+input@{parse\+\_\+input}}
\index{parse\+\_\+input@{parse\+\_\+input}!input.\+c@{input.\+c}}
\subsubsection[{parse\+\_\+input(int argc, char $\ast$argv[])}]{\setlength{\rightskip}{0pt plus 5cm}void parse\+\_\+input (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\label{input_8c_a8936b6e0080553a6d24710d459cf8853}


Parse P\+I\+N\+C\textquotesingle{}s input argument and input file. 


\begin{DoxyParams}{Parameters}
{\em argc} & Argument count \\
\hline
{\em argv} & Argument vector \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
This function performs a sanity check of argc and argv and reads the specified input file. It performs the necessary sanity checks of its data and stores the values. It also computes derived values. In case of failure it prints an error to stderr and terminates P\+I\+N\+C. 